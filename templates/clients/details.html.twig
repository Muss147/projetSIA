{% extends "admin/layout.html.twig" %}

{% block stylesheet %}
<link href="{{asset('assets/plugins/custom/datatables/datatables.bundle.css')}}" rel="stylesheet" type="text/css"/>
{% endblock %}

{% block body %}
	<div
		class="content d-flex flex-column flex-column-fluid " id="kt_content">

		<!--begin::Toolbar-->
		<div
			class="toolbar d-flex flex-stack mb-3 mb-lg-5" id="kt_toolbar">
			<!--begin::Container-->
			<div
				id="kt_toolbar_container" class=" container-fluid  d-flex flex-stack flex-wrap">


				<!--begin::Page title-->
				<div
					class="page-title d-flex flex-column me-5 py-2">
					<!--begin::Title-->
					<h1 class="d-flex flex-column text-gray-900 fw-bold fs-3 mb-0">
						Détails client
					</h1>
					<!--end::Title-->

					<!--begin::Breadcrumb-->
					<ul
						class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 pt-1">
						<!--begin::Item-->
						<li class="breadcrumb-item text-muted">
							<a href="{{path('quick_start')}}" class="text-muted text-hover-primary">
								Accueil
							</a>
						</li>
						<!--end::Item-->
						<!--begin::Item-->
						<li class="breadcrumb-item">
							<span class="bullet bg-gray-200 w-5px h-2px"></span>
						</li>
						<!--end::Item-->

						<!--begin::Item-->
						<li class="breadcrumb-item text-muted">
                            <a href="{{path('liste_clients')}}" class="text-muted text-hover-primary">
                                Clients
                            </a>
                        </li>
						<!--end::Item-->
						<!--begin::Item-->
						<li class="breadcrumb-item">
							<span class="bullet bg-gray-200 w-5px h-2px"></span>
						</li>
						<!--end::Item-->

						<!--begin::Item-->
						<li class="breadcrumb-item text-gray-900">
							Détails client
						</li>
						<!--end::Item-->

					</ul>
					<!--end::Breadcrumb-->
				</div>
				<!--end::Page title-->
				<!--begin::Actions-->
				{# <div
					class="d-flex align-items-center py-2">
					<!--begin::Wrapper-->
					<div
						class="me-4">
						<!--begin::Menu-->
						<a href="#" class="btn btn-sm btn-flex btn-light btn-active-primary fw-bold" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end">
							<i class="ki-duotone ki-filter fs-5 text-gray-500 me-1">
								<span class="path1"></span>
								<span class="path2"></span>
							</i>
							Filter
						</a>


						<!--begin::Menu 1-->
						<div
							class="menu menu-sub menu-sub-dropdown w-250px w-md-300px" data-kt-menu="true" id="kt_menu_6816689ea5bfe">
							<!--begin::Header-->
							<div class="px-7 py-5">
								<div class="fs-5 text-gray-900 fw-bold">Filter Options</div>
							</div>
							<!--end::Header-->

							<!--begin::Menu separator-->
							<div class="separator border-gray-200"></div>
							<!--end::Menu separator-->


							<!--begin::Form-->
							<div
								class="px-7 py-5">
								<!--begin::Input group-->
								<div
									class="mb-10">
									<!--begin::Label-->
									<label class="form-label fw-semibold">Status:</label>
									<!--end::Label-->

									<!--begin::Input-->
									<div>
										<select class="form-select form-select-solid" multiple data-kt-select2="true" data-close-on-select="false" data-placeholder="Select option" data-dropdown-parent="#kt_menu_6816689ea5bfe" data-allow-clear="true">
											<option></option>
											<option value="1">Approved</option>
											<option value="2">Pending</option>
											<option value="2">In Process</option>
											<option value="2">Rejected</option>
										</select>
									</div>
									<!--end::Input-->
								</div>
								<!--end::Input group-->

								<!--begin::Input group-->
								<div
									class="mb-10">
									<!--begin::Label-->
									<label class="form-label fw-semibold">Member Type:</label>
									<!--end::Label-->

									<!--begin::Options-->
									<div
										class="d-flex">
										<!--begin::Options-->
										<label class="form-check form-check-sm form-check-custom form-check-solid me-5">
											<input class="form-check-input" type="checkbox" value="1"/>
											<span class="form-check-label">
												Author
											</span>
										</label>
										<!--end::Options-->

										<!--begin::Options-->
										<label class="form-check form-check-sm form-check-custom form-check-solid">
											<input class="form-check-input" type="checkbox" value="2" checked="checked"/>
											<span class="form-check-label">
												Customer
											</span>
										</label>
										<!--end::Options-->
									</div>
									<!--end::Options-->
								</div>
								<!--end::Input group-->

								<!--begin::Input group-->
								<div
									class="mb-10">
									<!--begin::Label-->
									<label class="form-label fw-semibold">Notifications:</label>
									<!--end::Label-->

									<!--begin::Switch-->
									<div class="form-check form-switch form-switch-sm form-check-custom form-check-solid">
										<input class="form-check-input" type="checkbox" value="" name="notifications" checked/>
										<label class="form-check-label">
											Enabled
										</label>
									</div>
									<!--end::Switch-->
								</div>
								<!--end::Input group-->

								<!--begin::Actions-->
								<div class="d-flex justify-content-end">
									<button type="reset" class="btn btn-sm btn-light btn-active-light-primary me-2" data-kt-menu-dismiss="true">Reset</button>

									<button type="submit" class="btn btn-sm btn-primary" data-kt-menu-dismiss="true">Apply</button>
								</div>
								<!--end::Actions-->
							</div>
							<!--end::Form-->
						</div>
						<!--end::Menu 1-->
						<!--end::Menu-->
					</div>
					<!--end::Wrapper-->

					<!--begin::Button-->
					<a href="#" class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#kt_modal_create_app" id="kt_toolbar_primary_button">
						Create
					</a>
					<!--end::Button-->
				</div> #}
				<!--end::Actions-->
			</div>
			<!--end::Container-->
		</div>
		<!--end::Toolbar-->

		<!--begin::Post-->
		<div
			class="post d-flex flex-column-fluid" id="kt_post">
			<!--begin::Container-->
			<div
				id="kt_content_container" class=" container-xxl ">
				<!--begin::Layout-->
				<div
					class="d-flex flex-column flex-xl-row">
					<!--begin::Sidebar-->
					<div
						class="flex-column flex-lg-row-auto w-100 w-xl-350px mb-10">

						<!--begin::Card-->
						<div
							class="card mb-5 mb-xl-8">
							<!--begin::Card body-->
							<div
								class="card-body pt-15">
								<!--begin::Summary-->
								<div
									class="d-flex flex-center flex-column mb-5">
									<!--begin::Avatar-->
									<div class="symbol symbol-150px symbol-circle mb-7">
										<img src="{{asset('assets/media/svg/avatars/blank.svg')}}" alt="image"/>
									</div>
									<!--end::Avatar-->

									<!--begin::Name-->
									<a href="#" class="fs-3 text-gray-800 text-hover-primary fw-bold mb-1">
										{{client.nomComplet}}
									</a>
									<!--end::Name-->

									<!--begin::Email-->
									<a href="#" class="fs-5 fw-semibold text-muted text-hover-primary mb-6">
										{{client.telephone}}
									</a>
									<!--end::Email-->
								</div>
								<!--end::Summary-->

								<!--begin::Details toggle-->
								<div class="d-flex flex-stack fs-4 py-3">
									<div class="fw-bold">
										Détails
									</div>

									<!--begin::Badge-->
									<div class="badge badge-light-{{client.categorie.couleur}} d-inline">{{client.categorie.libelle}}</div>
									<!--begin::Badge-->
								</div>
								<!--end::Details toggle-->

								<div class="separator separator-dashed my-3"></div>

								<!--begin::Details content-->
								<div
									class="pb-5 fs-6">
									<!--begin::Details item-->
									<div class="fw-bold mt-5">Identifiant</div>
									<div class="text-gray-600">ID-{{client.id}}</div>
									<!--begin::Details item-->
									<!--begin::Details item-->
									<div class="fw-bold mt-5">Email</div>
									<div class="text-gray-600">
										<a href="mailto:{{client.email|default('')}}" class="text-gray-600 text-hover-primary">{{client.email|default('')}}</a>
									</div>
									<!--begin::Details item-->
									<!--begin::Details item-->
									<div class="fw-bold mt-5">Adresse</div>
									<div class="text-gray-600">{{client.quartier ? client.quartier ~', ' : ''}}
										<br/>{{client.commune ? client.commune ~', ' : ''}}{{client.ville}}</div>
									<!--begin::Details item-->
								</div>
								<!--end::Details content-->
							</div>
							<!--end::Card body-->
						</div>
						<!--end::Card-->
					</div>
					<!--end::Sidebar-->

					<!--begin::Content-->
					<div
						class="flex-lg-row-fluid ms-lg-15">
						<!--begin:::Tabs-->
						<ul
							class="nav nav-custom nav-tabs nav-line-tabs nav-line-tabs-2x border-0 fs-4 fw-semibold mb-8">
							<!--begin:::Tab item-->
							<li class="nav-item">
								<a class="nav-link text-active-primary pb-4 active" data-bs-toggle="tab" href="#kt_ecommerce_customer_overview">Aperçu</a>
							</li>
							<!--end:::Tab item-->

							<!--begin:::Tab item-->
							<li class="nav-item">
								<a class="nav-link text-active-primary pb-4" data-bs-toggle="tab" href="#kt_ecommerce_customer_general">Réglage général</a>
							</li>
							<!--end:::Tab item-->

							<!--begin:::Tab item-->
							{# <li class="nav-item">
								<a class="nav-link text-active-primary pb-4" data-bs-toggle="tab" href="#kt_ecommerce_customer_advanced">Advanced Settings</a>
							</li> #}
							<!--end:::Tab item-->
						</ul>
						<!--end:::Tabs-->

						<!--begin:::Tab content-->
						<div
							class="tab-content" id="myTabContent">
							<!--begin:::Tab pane-->
							<div class="tab-pane fade show active" id="kt_ecommerce_customer_overview" role="tabpanel">
								<div class="row row-cols-1 row-cols-md-2 mb-6 mb-xl-9">
									<div
										class="col">
										<!--begin::Card-->
										<div
											class="card pt-4 h-md-100 mb-6 mb-md-0">
											<!--begin::Card header-->
											<div
												class="card-header border-0">
												<!--begin::Card title-->
												<div class="card-title">
													<h2 class="fw-bold">Total dépenses</h2>
												</div>
												<!--end::Card title-->
											</div>
											<!--end::Card header-->

											<!--begin::Card body-->
											<div class="card-body pt-0">
												<div class="fw-bold fs-2">
													<div class="d-flex">
														<i class="ki-duotone ki-heart text-{{client.categorie.couleur}} fs-2x">
															<span class="path1"></span>
															<span class="path2"></span>
														</i>
														<div class="ms-2">
															4,571
															<span class="text-muted fs-4 fw-semibold">F CFA</span>
														</div>
													</div>
													<div class="fs-7 fw-normal text-muted">Gagner des points de fidélité à chaque achat.</div>
												</div>
											</div>
											<!--end::Card body-->
										</div>
										<!--end::Card-->
									</div>

									<div
										class="col">
										<!--begin::Reward Tier-->
										<a
											href="#" class="card bg-info hoverable h-md-100">
											<!--begin::Body-->
											<div class="card-body">
												<i class="ki-duotone ki-award text-white fs-3x ms-n1">
													<span class="path1"></span>
													<span class="path2"></span>
													<span class="path3"></span>
												</i>
												<div class="text-white fw-bold fs-2 mt-5">
													{{client.categorie.libelle}}
												</div>

												<div class="fw-semibold text-white">
													{{client.categorie.description}}
												</div>
											</div>
											<!--end::Body-->
										</a>
										<!--end::Reward Tier-->
									</div>
								</div>


								<!--begin::Card-->
								<div
									class="card pt-4 mb-6 mb-xl-9">
									<!--begin::Card header-->
									<div
										class="card-header border-0">
										<!--begin::Card title-->
										<div class="card-title">
											<h2>Historique des transactions</h2>
										</div>
										<!--end::Card title-->
									</div>
									<!--end::Card header-->

									<!--begin::Card body-->
									<div
										class="card-body pt-0 pb-5">
										<!--begin::Table-->
										<table class="table align-middle table-row-dashed gy-5" id="kt_table_customers_payment">
											<thead class="border-bottom border-gray-200 fs-7 fw-bold">
												<tr class="text-start text-muted text-uppercase gs-0">
													<th class="min-w-100px">No. comamnde</th>
													<th>Status</th>
													<th>Montant</th>
													<th class="min-w-100px">Récompenses</th>
													<th class="min-w-100px">Date</th>
												</tr>
											</thead>
											<tbody class="fs-6 fw-semibold text-gray-600">
												<tr>
													<td>
														<a href="/metronic8/demo10/apps/ecommerce/sales/details.html" class="text-gray-600 text-hover-primary mb-1">#14492</a>
													</td>
													<td>
														<span class="badge badge-light-success">Successful</span>
													</td>
													<td>
														$1,200.00
													</td>
													<td>
														120
													</td>
													<td>
														14 Dec 2020, 8:43 pm
													</td>
												</tr>
												<tr>
													<td>
														<a href="/metronic8/demo10/apps/ecommerce/sales/details.html" class="text-gray-600 text-hover-primary mb-1">#15342</a>
													</td>
													<td>
														<span class="badge badge-light-warning">Pending</span>
													</td>
													<td>
														$880.00
													</td>
													<td>
														88
													</td>
													<td>
														21 Oct 2020, 5:54 pm
													</td>
												</tr>
												<tr>
													<td>
														<a href="/metronic8/demo10/apps/ecommerce/sales/details.html" class="text-gray-600 text-hover-primary mb-1">#15722</a>
													</td>
													<td>
														<span class="badge badge-light-danger">Rejected</span>
													</td>
													<td>
														$450.00
													</td>
													<td>
														45
													</td>
													<td>
														03 Sep 2020, 1:08 am
													</td>
												</tr>
											</tbody>
										</table>
										<!--end::Table-->
									</div>
									<!--end::Card body-->
								</div>
								<!--end::Card-->
							</div>
							<!--end:::Tab pane-->

							<!--begin:::Tab pane-->
							<div
								class="tab-pane fade" id="kt_ecommerce_customer_general" role="tabpanel">
								<!--begin::Card-->
								<div
									class="card pt-4 mb-6 mb-xl-9">
									<!--begin::Card header-->
									<div
										class="card-header border-0">
										<!--begin::Card title-->
										<div class="card-title">
											<h2>Profil</h2>
										</div>
										<!--end::Card title-->
									</div>
									<!--end::Card header-->

									<!--begin::Card body-->
									<div
										class="card-body pt-0 pb-5">
										<!--begin::Form-->
                                        {{form_start(edit_client, {'attr': {'id': 'kt_ecommerce_customer_profile', 'class': 'form'}})}}
											<!--begin::Input group-->
											{# <div
												class="mb-7">
												<!--begin::Label-->
												<label class="fs-6 fw-semibold mb-2">
													<span>Avatar</span>

													<span class="ms-1" data-bs-toggle="tooltip" title="Allowed file types: png, jpg, jpeg.">
														<i class="ki-duotone ki-information fs-7">
															<span class="path1"></span>
															<span class="path2"></span>
															<span class="path3"></span>
														</i>
													</span>
												</label>
												<!--end::Label-->

												<!--begin::Image input wrapper-->
												<div
													class="mt-1">
													<!--begin::Image input placeholder-->
													<style>
														.image-input-placeholder {
															background-image: url('/metronic8/demo10/assets/media/svg/files/blank-image.svg');
														}

														[data-bs-theme="dark"] .image-input-placeholder {
															background-image: url('/metronic8/demo10/assets/media/svg/files/blank-image-dark.svg');
														}
													</style>
													<!--end::Image input placeholder-->

													<!--begin::Image input-->
													<div
														class="image-input image-input-outline image-input-placeholder" data-kt-image-input="true">
														<!--begin::Preview existing avatar-->
														<div class="image-input-wrapper w-125px h-125px" style="background-image: url(/metronic8/demo10/assets/media/avatars/300-1.jpg)"></div>
														<!--end::Preview existing avatar-->

														<!--begin::Edit-->
														<label class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow" data-kt-image-input-action="change" data-bs-toggle="tooltip" title="Change avatar">
															<i class="ki-duotone ki-pencil fs-7">
																<span class="path1"></span>
																<span class="path2"></span>
															</i>
															<!--begin::Inputs-->
															<input type="file" name="avatar" accept=".png, .jpg, .jpeg"/>
															<input
															type="hidden" name="avatar_remove"/>
														<!--end::Inputs-->
														</label>
														<!--end::Edit-->

														<!--begin::Cancel-->
														<span class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow" data-kt-image-input-action="cancel" data-bs-toggle="tooltip" title="Cancel avatar">
															<i class="ki-duotone ki-cross fs-2">
																<span class="path1"></span>
																<span class="path2"></span>
															</i>
														</span>
														<!--end::Cancel-->

														<!--begin::Remove-->
														<span class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow" data-kt-image-input-action="remove" data-bs-toggle="tooltip" title="Remove avatar">
															<i class="ki-duotone ki-cross fs-2">
																<span class="path1"></span>
																<span class="path2"></span>
															</i>
														</span>
														<!--end::Remove-->
													</div>
													<!--end::Image input-->
												</div>
												<!--end::Image input wrapper-->
											</div> #}
											<!--end::Input group-->

											<!--begin::Input group-->
											<div
												class="fv-row mb-7">
												<!--begin::Label-->
												<label class="fs-6 fw-semibold mb-2 required">Nom complet</label>
												<!--end::Label-->

												<!--begin::Input-->
                                                {{form_widget(edit_client.nomComplet, {'attr': {'class': 'form-control form-control-solid', 'placeholder': 'Nom & Prénom'}})}}
											<!--end::Input-->
											</div>
											<!--end::Input group-->

											<!--begin::Row-->
											<div
												class="row row-cols-1 row-cols-md-2">
												<!--begin::Col-->
												<div
													class="col">
													<!--begin::Input group-->
													<div
														class="fv-row mb-7">
														<!--begin::Label-->
														<label class="fs-6 fw-semibold mb-2">
															<span class="required">Téléphone</span>

															<span class="ms-1" data-bs-toggle="tooltip" title="Email address must be active">
																<i class="ki-duotone ki-information fs-7">
																	<span class="path1"></span>
																	<span class="path2"></span>
																	<span class="path3"></span>
																</i>
															</span>
														</label>
														<!--end::Label-->

														<!--begin::Input-->
                                                        {{form_widget(edit_client.telephone, {'attr': {'class': 'form-control form-control-solid', 'placeholder': 'Numéro de téléphone'}})}}
													<!--end::Input-->
													</div>
													<!--end::Input group-->
												</div>
												<!--end::Col-->

												<!--begin::Col-->
												<div
													class="col">
													<!--begin::Input group-->
													<div
														class="fv-row mb-7">
														<!--begin::Label-->
														<label class="fs-6 fw-semibold mb-2">
															<span>Email</span>
														</label>
														<!--end::Label-->

														<!--begin::Input-->
														{{form_widget(edit_client.email, {'attr': {'class': 'form-control form-control-solid', 'placeholder': 'Adresse email'}})}}
													<!--end::Input-->
													</div>
													<!--end::Input group-->
												</div>
												<!--end::Col-->
											</div>
											<!--end::Row-->

                                            <!--begin::Input group-->
                                            <div
                                                class="fv-row mb-7">
                                                <!--begin::Label-->
                                                <label class="required fs-6 fw-semibold mb-2">Catégorie</label>
                                                <!--end::Label-->

                                                <!--begin::Input-->
                                                {{form_widget(edit_client.categorie, {'attr': {'class': 'form-select form-select-solid', 'data-control': 'select2', 'data-placeholder': 'Sélectionner une catégorie...', 'data-hide-search': 'true'}})}}
                                                <!--end::Input-->
                                            </div>
                                            <!--end::Input group-->

											<!--begin::Input group-->
											<div
												class="fv-row mb-7">
												<!--begin::Label-->
												<label class="fs-6 fw-semibold mb-2">Quartier</label>
												<!--end::Label-->

												<!--begin::Input-->
                                                {{form_widget(edit_client.quartier, {'attr': {'class': 'form-control form-control-solid', 'placeholder': 'Le nom du quartier'}})}}
											<!--end::Input-->
											</div>
											<!--end::Input group-->

											<!--begin::Row-->
											<div
												class="row row-cols-1 row-cols-md-2">
												<!--begin::Col-->
												<div
													class="col">
													<!--begin::Input group-->
													<div
														class="fv-row mb-7">
														<!--begin::Label-->
														<label class="fs-6 fw-semibold mb-2">
															<span class="">Commune</span>
														</label>
														<!--end::Label-->

														<!--begin::Input-->
                                                        {{form_widget(edit_client.commune, {'attr': {'class': 'form-control form-control-solid', 'placeholder': 'Le nom de la commune'}})}}
													<!--end::Input-->
													</div>
													<!--end::Input group-->
												</div>
												<!--end::Col-->

												<!--begin::Col-->
												<div
													class="col">
													<!--begin::Input group-->
													<div
														class="fv-row mb-7">
														<!--begin::Label-->
														<label class="fs-6 fw-semibold mb-2">
															<span>Ville</span>
														</label>
														<!--end::Label-->

														<!--begin::Input-->
														{{form_widget(edit_client.ville, {'attr': {'class': 'form-control form-control-solid', 'placeholder': 'Le nom dela ville'}})}}
													<!--end::Input-->
													</div>
													<!--end::Input group-->
												</div>
												<!--end::Col-->
											</div>
											<!--end::Row-->

                                            <!--begin::Input group-->
                                            <div
                                                class="fv-row mb-15">
                                                <!--begin::Label-->
                                                <label class="fs-6 fw-semibold mb-2">Description</label>
                                                <!--end::Label-->

                                                <!--begin::Input-->
                                                {{form_widget(edit_client.description, {'attr': {'class': 'form-control form-control-solid', 'placeholder': ''}})}}
                                                <!--end::Input-->
                                            </div>
                                            <!--end::Input group-->

											<div
												class="d-flex justify-content-end">
												<!--begin::Button-->
												<button type="submit" id="kt_ecommerce_customer_profile_submit" class="btn btn-light-primary">
													<span class="indicator-label">
														Enregistrer
													</span>
													<span class="indicator-progress">
														Veuillez patienter...
														<span class="spinner-border spinner-border-sm align-middle ms-2"></span>
													</span>
												</button>
												<!--end::Button-->
											</div>
										{{form_end(edit_client)}}
										<!--end::Form-->
									</div>
									<!--end::Card body-->
								</div>
								<!--end::Card-->

								<!--begin::Card-->
								<div
									class="card pt-4 mb-6 mb-xl-9">
									<!--begin::Card header-->
									<div
										class="card-header border-0">
										<!--begin::Card title-->
										<div class="card-title">
											<h2>Liste des Enfants</h2>
										</div>
										<!--end::Card title-->


										<!--begin::Card toolbar-->
										<div class="card-toolbar">
											<a href="#" class="btn btn-sm btn-flex btn-light-primary" data-bs-toggle="modal" data-bs-target="#kt_modal_add_address">
												<i class="ki-duotone ki-plus-square fs-3">
													<span class="path1"></span>
													<span class="path2"></span>
													<span class="path3"></span>
												</i>
												Ajouter un enfant
											</a>
										</div>
										<!--end::Card toolbar-->
									</div>
									<!--end::Card header-->

									<!--begin::Card body-->
									<div id="kt_ecommerce_customer_addresses" class="card-body pt-0 pb-5">
										<div class="accordion accordion-icon-toggle" id="kt_ecommerce_customer_addresses_accordion">
											<!--begin::Addresses-->
                                            {% for index, enfant in client.enfants %}
											<!--begin::Address-->
											<div
												class="py-0"> <!--begin::Header-->
												<div
													class="py-3 d-flex flex-stack flex-wrap">
													<!--begin::Toggle-->
													<div
														class="accordion-header d-flex align-items-center collapsible collapsed rotate" data-bs-toggle="collapse" href="#kt_ecommerce_customer_addresses_{{index}}" role="button" aria-expanded="false" aria-controls="kt_customer_view_payment_method_1">
														<!--begin::Arrow-->
														<div class="accordion-icon me-3">
															<i class="ki-duotone ki-right fs-4"></i>
														</div>
														<!--end::Arrow-->

														<!--begin::Summary-->
														<div class="me-3">
															<div class="d-flex align-items-center">
																<div class="fs-4 fw-bold nomComplet">
																	{{enfant.nomComplet}}
																</div>
															</div>
															<div class="text-muted">{{ enfant.age ~ ((enfant.age matches '/mois/' or enfant.age matches '/an(s)?/') ? '' : ' an(s)') }}</div>
														</div>
														<!--end::Summary-->
													</div>
													<!--end::Toggle-->

													<!--begin::Toolbar-->
													<div
														class="d-flex my-3 ms-9">
														<!--begin::Edit-->
														<a href="#" class="btn btn-icon btn-active-light-primary w-30px h-30px me-3" data-bs-toggle="modal" data-bs-target="#kt_modal_update_address" data-bs-ident="{{enfant.id}}">
															<span data-bs-toggle="tooltip" data-bs-trigger="hover" title="Modifier">
																<i class="ki-duotone ki-pencil fs-3">
																	<span class="path1"></span>
																	<span class="path2"></span>
																</i>
															</span>
														</a>
														<!--end::Edit-->

														<!--begin::Delete-->
                                                        <form method="post" action="{{ path('enfant_delete', {'id': enfant.id}) }}">
                                                            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ enfant.id) }}">
                                                            <a href="#" class="btn btn-icon btn-active-light-primary w-30px h-30px me-3" data-bs-toggle="tooltip" title="Supprimer" data-kt-customer-payment-method="delete">
                                                                <i class="ki-duotone ki-trash fs-3">
                                                                    <span class="path1"></span>
                                                                    <span class="path2"></span>
                                                                    <span class="path3"></span>
                                                                    <span class="path4"></span>
                                                                    <span class="path5"></span>
                                                                </i>
                                                            </a>
                                                        </form>
														<!--end::Delete-->
													</div>
													<!--end::Toolbar-->
												</div>
												<!--end::Header-->

												<!--begin::Body-->
												<div
													id="kt_ecommerce_customer_addresses_{{index}}" class="collapse fs-6 ps-9" data-bs-parent="#kt_ecommerce_customer_addresses_accordion">
													<!--begin::Details-->
													<div class="d-flex gap-3">
														<div class="fw-bold text-gray-600">
															Taille :
														</div>
														<div class="text-muted">{{enfant.taille|default(0)}}</div>
													</div>
													<!--end::Details-->
                                                    <!--begin::Details-->
													<div class="d-flex gap-3">
														<div class="fw-bold text-gray-600">
															Pointure :
														</div>
														<div class="text-muted">{{enfant.pointure|default(0)}}</div>
													</div>
													<!--end::Details-->
												</div>
												<!--end::Body-->
											</div>
											<!--end::Address-->
                                            {% endfor %}
											<!--end::Addresses-->
										</div>
									</div>
									<!--end::Card body-->
								</div>
								<!--end::Card-->
							</div>
							<!--end:::Tab pane-->

							<!--begin:::Tab pane-->
							{# <div
								class="tab-pane fade" id="kt_ecommerce_customer_advanced" role="tabpanel">
								<!--begin::Card-->
								<div
									class="card pt-4 mb-6 mb-xl-9">
									<!--begin::Card header-->
									<div
										class="card-header border-0">
										<!--begin::Card title-->
										<div class="card-title">
											<h2>Security Details</h2>
										</div>
										<!--end::Card title-->
									</div>
									<!--end::Card header-->

									<!--begin::Card body-->
									<div
										class="card-body pt-0 pb-5">
										<!--begin::Table wrapper-->
                                        
										<!--end::Table wrapper-->
									</div>
									<!--end::Card body-->
								</div>
								<!--end::Card-->
							</div> #}
							<!--end:::Tab pane-->
						</div>
						<!--end:::Tab content-->
					</div>
					<!--end::Content-->
				</div>
				<!--end::Layout-->

				<!--begin::Modals-->
				<!--begin::Modal - Update Enfant-->
				<div
					class="modal fade" id="kt_modal_update_address" tabindex="-1" aria-hidden="true"> <!--begin::Modal dialog-->
					<div
						class="modal-dialog modal-dialog-centered mw-650px">
						<!--begin::Modal content-->
						<div
							class="modal-content">
							<!--begin::Form-->
							<form
                            class="form" action="" method="POST" id="kt_modal_update_address_form">
								<!--begin::Modal header-->
								<div
									class="modal-header" id="kt_modal_update_address_header">
									<!--begin::Modal title-->
									<h2 class="fw-bold">Modifier un enfant</h2>
									<!--end::Modal title-->

									<!--begin::Close-->
									<div id="kt_modal_update_address_close" class="btn btn-icon btn-sm btn-active-icon-primary">
										<i class="ki-duotone ki-cross fs-1">
											<span class="path1"></span>
											<span class="path2"></span>
										</i>
									</div>
									<!--end::Close-->
								</div>
								<!--end::Modal header-->

								<!--begin::Modal body-->
								<div
									class="modal-body py-10 px-lg-17">
                                    <!--begin::Input group-->
                                    <div
                                        class="d-flex flex-column mb-7 fv-row">
                                        <!--begin::Label-->
                                        <label class="fs-6 fw-semibold mb-2 required">Nom complet</label>
                                        <!--end::Label-->

                                        <!--begin::Input-->
                                        <input
                                        class="form-control form-control-solid" placeholder="" name="enfant_nomComplet" value=""/>
                                        <input type="hidden" name="enfant_id">
                                    <!--end::Input-->
                                    </div>
                                    <!--end::Input group-->

                                    <!--begin::Input wrapper-->
                                    <div class="mb-10">
                                        <!--begin::Label-->
                                        <label class="fs-6 fw-semibold mb-2">
                                            Âge de l'enfant

                                            <span class="m2-1" data-bs-toggle="tooltip" title="Choisir l'âge selon le nombre de mois ou d'années">
                                                <i class="ki-duotone ki-information fs-7"><span class="path1"></span><span class="path2"></span><span class="path3"></span></i>
                                            </span>
                                        </label>
                                        <!--end::Label-->

                                        <!--begin::Slider-->
                                        <div class="d-flex flex-column text-center">
                                            <div class="d-flex align-items-start justify-content-center mb-7">
                                                <span class="fw-bold fs-3x" id="kt_modal_update_enfant_age_label"></span>
                                            </div>
                                            <div id="kt_modal_update_enfant_age_slider" class="noUi-sm"></div>
                                        </div>
                                        <!--end::Slider-->
                                        <input type="hidden" id="enfant_age" name="enfant_age">
                                    </div>
                                    <!--end::Input wrapper-->

                                    <!--begin::Input group-->
                                    <div
                                        class="row g-9 mb-7">
                                        <!--begin::Col-->
                                        <div
                                            class="col-md-6 fv-row">
                                            <!--begin::Label-->
                                            <label class="fs-6 fw-semibold mb-2">Taille</label>
                                            <!--end::Label-->
                                            
                                            <!--begin::Dialer-->
                                            <div class="position-relative"
                                                data-kt-dialer="true"
                                                data-kt-dialer-min="0"
                                                data-kt-dialer-max="2"
                                                data-kt-dialer-step="0.10"
                                                data-kt-dialer-suffix="cm"
                                                data-kt-dialer-decimals="2">

                                                <!--begin::Decrease control-->
                                                <button type="button" class="btn btn-icon btn-active-color-gray-700 position-absolute translate-middle-y top-50 start-0" data-kt-dialer-control="decrease">
                                                    <i class="ki-duotone ki-minus-square fs-2"><span class="path1"></span><span class="path2"></span></i>
                                                </button>
                                                <!--end::Decrease control-->

                                                <!--begin::Input control-->
                                                <input type="text" class="form-control form-control-solid border-0 ps-12" data-kt-dialer-control="input" placeholder="Amount" name="enfant_taille" readonly value="1.20" />
                                                <!--end::Input control-->

                                                <!--begin::Increase control-->
                                                <button type="button" class="btn btn-icon btn-active-color-gray-700 position-absolute translate-middle-y top-50 end-0" data-kt-dialer-control="increase">
                                                    <i class="ki-duotone ki-plus-square fs-2"><span class="path1"></span><span class="path2"></span><span class="path3"></span></i>
                                                </button>
                                                <!--end::Increase control-->
                                            </div>
                                            <!--end::Dialer-->
                                        </div>
                                        <!--end::Col-->

                                        <!--begin::Col-->
                                        <div
                                            class="col-md-6 fv-row">
                                            <!--begin::Label-->
                                            <label class="fs-6 fw-semibold mb-2">Pointure</label>
                                            <!--end::Label-->
                                            
                                            <!--begin::Dialer-->
                                            <div class="position-relative"
                                                data-kt-dialer="true"
                                                data-kt-dialer-min="1"
                                                data-kt-dialer-max="45"
                                                data-kt-dialer-step="1">

                                                <!--begin::Decrease control-->
                                                <button type="button" class="btn btn-icon btn-active-color-gray-700 position-absolute translate-middle-y top-50 start-0" data-kt-dialer-control="decrease">
                                                    <i class="ki-duotone ki-minus-square fs-2"><span class="path1"></span><span class="path2"></span></i>
                                                </button>
                                                <!--end::Decrease control-->

                                                <!--begin::Input control-->
                                                <input type="text" class="form-control form-control-solid border-0 ps-12" data-kt-dialer-control="input" placeholder="Amount" name="enfant_pointure" readonly value="1" />
                                                <!--end::Input control-->

                                                <!--begin::Increase control-->
                                                <button type="button" class="btn btn-icon btn-active-color-gray-700 position-absolute translate-middle-y top-50 end-0" data-kt-dialer-control="increase">
                                                    <i class="ki-duotone ki-plus-square fs-2"><span class="path1"></span><span class="path2"></span><span class="path3"></span></i>
                                                </button>
                                                <!--end::Increase control-->
                                            </div>
                                            <!--end::Dialer-->
                                        </div>
                                        <!--end::Col-->
                                    </div>
                                    <!--end::Input group-->
								</div>
								<!--end::Modal body-->

								<!--begin::Modal footer-->
								<div
									class="modal-footer flex-center">
									<!--begin::Button-->
									<button type="reset" id="kt_modal_update_address_cancel" class="btn btn-light me-3">
										Annuler
									</button>
									<!--end::Button-->

									<!--begin::Button-->
									<button type="submit" id="kt_modal_update_address_submit" class="btn btn-primary">
										<span class="indicator-label">
											Soumettre
										</span>
										<span class="indicator-progress">
											Veuillez patienter...
											<span class="spinner-border spinner-border-sm align-middle ms-2"></span>
										</span>
									</button>
									<!--end::Button-->
								</div>
								<!--end::Modal footer-->
                            </form>
							<!--end::Form-->
						</div>
					</div>
				</div>
				<!--end::Modal - Update Enfant-->
				<!--begin::Modal - New Enfant-->
				<div
					class="modal fade" id="kt_modal_add_address" tabindex="-1" aria-hidden="true">
					<!--begin::Modal dialog-->
					<div
						class="modal-dialog modal-dialog-centered mw-650px">
						<!--begin::Modal content-->
						<div
							class="modal-content">
							<!--begin::Form-->
                            {{form_start(new_enfant, {'attr': {'id': 'kt_modal_add_address_form', 'class': 'form'}})}}
								<!--begin::Modal header-->
								<div
									class="modal-header" id="kt_modal_add_address_header">
									<!--begin::Modal title-->
									<h2 class="fw-bold">Ajouter un enfant</h2>
									<!--end::Modal title-->

									<!--begin::Close-->
									<div id="kt_modal_add_address_close" class="btn btn-icon btn-sm btn-active-icon-primary">
										<i class="ki-duotone ki-cross fs-1">
											<span class="path1"></span>
											<span class="path2"></span>
										</i>
									</div>
									<!--end::Close-->
								</div>
								<!--end::Modal header-->

								<!--begin::Modal body-->
								<div
									class="modal-body py-10 px-lg-17">
                                    <!--begin::Input group-->
                                    <div
                                        class="d-flex flex-column mb-7 fv-row">
                                        <!--begin::Label-->
                                        <label class="fs-6 fw-semibold mb-2 required">Nom complet</label>
                                        <!--end::Label-->

                                        <!--begin::Input-->
                                        {{form_widget(new_enfant.nomComplet, {'attr': {'class': 'form-control form-control-solid', 'placeholder': 'Nom & Prénom'}})}}
                                    <!--end::Input-->
                                    </div>
                                    <!--end::Input group-->

                                    <!--begin::Input wrapper-->
                                    <div class="mb-10">
                                        <!--begin::Label-->
                                        <label class="fs-6 fw-semibold mb-2">
                                            Âge de l'enfant

                                            <span class="m2-1" data-bs-toggle="tooltip" title="Choisir l'âge selon le nombre de mois ou d'années">
                                                <i class="ki-duotone ki-information fs-7"><span class="path1"></span><span class="path2"></span><span class="path3"></span></i>
                                            </span>
                                        </label>
                                        <!--end::Label-->

                                        <!--begin::Slider-->
                                        <div class="d-flex flex-column text-center">
                                            <div class="d-flex align-items-start justify-content-center mb-7">
                                                <span class="fw-bold fs-3x" id="kt_modal_create_enfant_age_label"></span>
                                            </div>
                                            <div id="kt_modal_create_enfant_age_slider" class="noUi-sm"></div>
                                        </div>
                                        <!--end::Slider-->
                                        {{ form_row(new_enfant.age) }}
                                    </div>
                                    <!--end::Input wrapper-->

                                    <!--begin::Input group-->
                                    <div
                                        class="row g-9 mb-7">
                                        <!--begin::Col-->
                                        <div
                                            class="col-md-6 fv-row">
                                            <!--begin::Label-->
                                            <label class="fs-6 fw-semibold mb-2">Taille</label>
                                            <!--end::Label-->

                                            <!--begin::Dialer-->
                                            <div class="position-relative"
                                                data-kt-dialer="true"
                                                data-kt-dialer-min="0"
                                                data-kt-dialer-max="2"
                                                data-kt-dialer-step="0.10"
                                                data-kt-dialer-suffix="cm"
                                                data-kt-dialer-decimals="2">

                                                <!--begin::Decrease control-->
                                                <button type="button" class="btn btn-icon btn-active-color-gray-700 position-absolute translate-middle-y top-50 start-0" data-kt-dialer-control="decrease">
                                                    <i class="ki-duotone ki-minus-square fs-2"><span class="path1"></span><span class="path2"></span></i>
                                                </button>
                                                <!--end::Decrease control-->

                                                <!--begin::Input control-->
                                                {{form_widget(new_enfant.taille, {'attr': {'class': 'form-control form-control-solid border-0 ps-12', 'placeholder': '...en cm', 'data-kt-dialer-control': 'input', 'readonly': 'true'}})}}
                                                <!--end::Input control-->

                                                <!--begin::Increase control-->
                                                <button type="button" class="btn btn-icon btn-active-color-gray-700 position-absolute translate-middle-y top-50 end-0" data-kt-dialer-control="increase">
                                                    <i class="ki-duotone ki-plus-square fs-2"><span class="path1"></span><span class="path2"></span><span class="path3"></span></i>
                                                </button>
                                                <!--end::Increase control-->
                                            </div>
                                            <!--end::Dialer-->
                                        </div>
                                        <!--end::Col-->

                                        <!--begin::Col-->
                                        <div
                                            class="col-md-6 fv-row">
                                            <!--begin::Label-->
                                            <label class="fs-6 fw-semibold mb-2">Pointure</label>
                                            <!--end::Label-->
                                            
                                            <!--begin::Dialer-->
                                            <div class="position-relative"
                                                data-kt-dialer="true"
                                                data-kt-dialer-min="0"
                                                data-kt-dialer-max="45"
                                                data-kt-dialer-step="1">

                                                <!--begin::Decrease control-->
                                                <button type="button" class="btn btn-icon btn-active-color-gray-700 position-absolute translate-middle-y top-50 start-0" data-kt-dialer-control="decrease">
                                                    <i class="ki-duotone ki-minus-square fs-2"><span class="path1"></span><span class="path2"></span></i>
                                                </button>
                                                <!--end::Decrease control-->

                                                <!--begin::Input control-->
                                                {{form_widget(new_enfant.pointure, {'attr': {'class': 'form-control form-control-solid border-0 ps-12', 'placeholder': '...en cm', 'data-kt-dialer-control': 'input', 'readonly': 'true'}})}}
                                                <!--end::Input control-->

                                                <!--begin::Increase control-->
                                                <button type="button" class="btn btn-icon btn-active-color-gray-700 position-absolute translate-middle-y top-50 end-0" data-kt-dialer-control="increase">
                                                    <i class="ki-duotone ki-plus-square fs-2"><span class="path1"></span><span class="path2"></span><span class="path3"></span></i>
                                                </button>
                                                <!--end::Increase control-->
                                            </div>
                                            <!--end::Dialer-->
                                        </div>
                                        <!--end::Col-->
                                    </div>
                                    <!--end::Input group-->
								</div>
								<!--end::Modal body-->

								<!--begin::Modal footer-->
								<div
									class="modal-footer flex-center">
									<!--begin::Button-->
									<button type="reset" id="kt_modal_add_address_cancel" class="btn btn-light me-3">
										Annuler
									</button>
									<!--end::Button-->

									<!--begin::Button-->
									<button type="submit" id="kt_modal_add_address_submit" class="btn btn-primary">
										<span class="indicator-label">
											Soumettre
										</span>
										<span class="indicator-progress">
											Veuillez patienter...
											<span class="spinner-border spinner-border-sm align-middle ms-2"></span>
										</span>
									</button>
									<!--end::Button-->
								</div>
								<!--end::Modal footer-->
							{{form_end(new_enfant)}}
							<!--end::Form-->
						</div>
					</div>
				</div>
				<!--end::Modal - New Enfant-->
                <!--end::Modals-->
            </div>
			<!--end::Container-->
		</div>
		<!--end::Post-->
	</div>
{% endblock %}

{% block scripts %}
<script src="{{asset('assets/plugins/custom/datatables/datatables.bundle.js')}}"></script>

<script src="{{asset('assets/js/custom/apps/ecommerce/customers/details/transaction-history.js')}}"></script>
<script src="{{asset('assets/js/custom/apps/ecommerce/customers/details/add-address.js')}}"></script>
<script src="{{asset('assets/js/custom/apps/ecommerce/customers/details/update-address.js')}}"></script>
<script src="{{asset('assets/js/custom/apps/ecommerce/customers/details/delete-address.js')}}"></script>
<script src="{{asset('assets/js/custom/apps/ecommerce/customers/details/update-profile.js')}}"></script>

<script type="text/javascript">
    const ageSlider = (defaultValue, budgetSlider, budgetValue, hiddenField) => {
        noUiSlider.create(budgetSlider, {
            start: [defaultValue],
            connect: true,
            range: {
                min: 1,
                max: 216
            }
        });

        budgetSlider.noUiSlider.on("update", function (values, handle) {
            const value = Math.round(values[handle]);
            let displayValue = '';

            if (value < 12) {
                displayValue = value + ' mois';
            } else {
                const years = Math.round(value / 12);
                displayValue = `${years} an${years > 1 ? 's' : ''}`;
            }

            budgetValue.innerHTML = displayValue;
            // Mise à jour champ caché en mois
            hiddenField.value = displayValue;
        });
    }

    ageSlider(6,
        document.querySelector("#kt_modal_create_enfant_age_slider"),
        document.querySelector("#kt_modal_create_enfant_age_label"),
        document.querySelector("#enfants_age")
    );

    ageSlider(6,
        document.querySelector("#kt_modal_update_enfant_age_slider"),
        document.querySelector("#kt_modal_update_enfant_age_label"),
        document.querySelector("#enfant_age")
    );
    const enfants = {{ client.enfants|map(c => {
        id: c.id,
        nomComplet: c.nomComplet,
        age: c.age,
        taille: c.taille,
        pointure: c.pointure
    })|json_encode|raw }};

    const editModal = document.getElementById('kt_modal_update_address');
    function convertirAge(age) {
        age = age.toString().toLowerCase().trim();

        if (age.includes('an')) {
            // Extrait le nombre et multiplie par 12
            const nombre = parseInt(age);
            return nombre * 12;
        } else if (age.includes('mois')) {
            // Extrait le nombre tel quel
            const nombre = parseInt(age);
            return nombre;
        } else {
            // Si aucun mot clé, on suppose que c’est en années
            const nombre = parseInt(age);
            return nombre * 12;
        }
    }
    editModal.addEventListener('show.bs.modal', event => {
        const paramId = event.relatedTarget.attributes['data-bs-ident'].value;
        const enfant = enfants.find(c => c.id == paramId);
        var clickSlider = document.querySelector("#kt_modal_update_enfant_age_slider");

        if (!enfant) return;

        editModal.querySelector('input[name="enfant_id"]').value = enfant.id;
        editModal.querySelector('input[name="enfant_nomComplet"]').value = enfant.nomComplet;
        editModal.querySelector('input[name="enfant_age"]').value = enfant.age;
        editModal.querySelector('input[name="enfant_taille"]').value = enfant.taille;
        editModal.querySelector('input[name="enfant_pointure"]').value = enfant.pointure;

        clickSlider.noUiSlider.set(convertirAge(enfant.age));
    });

    {% for type, messages in app.flashes %}
        {% for message in messages %}
        Swal.fire({
            html: `{{message|raw}}`,
            icon: "{{type}}",
            buttonsStyling: false,
            confirmButtonText: "Ok, compris !",
            customClass: {
                confirmButton: "btn btn-primary"
            }
        });
        {% endfor %}
    {% endfor %}
</script>
{% endblock %}
